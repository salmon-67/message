<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Salmon Chat</title>
    <style>
        :root { --bg-darker: #1e1f22; --bg-sidebar: #2b2d31; --bg-main: #313338; --discord-blue: #5865f2; --discord-red: #da373c; }
        * { box-sizing: border-box; color: #ffffff !important; font-family: -apple-system, sans-serif; }
        body { margin: 0; background: var(--bg-darker); display: flex; height: 100dvh; overflow: hidden; position: fixed; width: 100%; }

        #sidebar-left { 
            width: 260px; background: var(--bg-sidebar); display: flex; flex-direction: column; 
            border-right: 1px solid #1e1f22; transition: all 0.3s ease; overflow: hidden; z-index: 1001;
        }
        
        #main-chat { flex: 1; display: flex; flex-direction: column; background: var(--bg-main); min-width: 0; z-index: 1000; }
        
        #sidebar-right { width: 220px; background: var(--bg-sidebar); border-left: 1px solid #1e1f22; padding: 15px; display: flex; flex-direction: column; }

        .header-bar { height: 60px; display: flex; align-items: center; padding: 0 15px; border-bottom: 1px solid #1e1f22; background: var(--bg-main); flex-shrink: 0; }
        #messages { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 8px; }
        
        .member-item { padding: 8px; margin-bottom: 4px; border-radius: 4px; display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.05); }
        .msg-content { background: #383a40; padding: 10px; border-radius: 8px; max-width: 85%; word-wrap: break-word; }

        #input-area { padding: 15px; background: var(--bg-main); display: flex; gap: 10px; border-top: 1px solid #1e1f22; padding-bottom: env(safe-area-inset-bottom); }
        input { background: var(--bg-darker); border: 1px solid #3f4147; padding: 10px; border-radius: 4px; outline: none; }
        button { cursor: pointer; border: none; border-radius: 4px; font-weight: bold; background: var(--discord-blue); padding: 10px; }
        
        #auth-container { margin:auto; background:var(--bg-sidebar); padding:30px; border-radius:12px; width:320px; text-align:center; z-index: 2000; }

        /* The Leave Button Style */
        #btn-leave-chat { 
            background: var(--discord-red); 
            width: 100%; 
            margin-top: 20px;
            display: block; /* Forced display */
        }

        @media (max-width: 768px) {
            #sidebar-right { display: none !important; }
            #sidebar-left { position: absolute; height: 100%; width: 280px; transform: translateX(-100%); }
            #sidebar-left.open { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div id="auth-container">
        <h1>Salmon</h1>
        <input type="text" id="username" placeholder="Username" style="width:100%">
        <input type="password" id="password" placeholder="Password" style="width:100%; margin-top:10px;">
        <button id="btn-login" style="width:100%; margin-top:10px;">Log In</button>
        <button id="btn-signup" style="background:none; margin-top:10px; font-size:12px;">Create Account</button>
    </div>

    <div id="app-container" style="display:none; width:100%; height:100%;">
        <nav id="sidebar-left">
            <div class="header-bar">CHANNELS</div>
            <div id="chat-list" style="flex:1; overflow-y:auto;"></div>
            <div style="padding:10px; border-top:1px solid #1e1f22;">
                <input type="text" id="group-name" placeholder="New..." style="width:100%; margin-bottom:5px;">
                <button id="btn-create-channel" style="width:100%; background:#23a55a;">Create</button>
            </div>
        </nav>

        <main id="main-chat">
            <header class="header-bar">
                <button id="btn-toggle-menu" style="background:none; font-size:20px; margin-right:15px;">â˜°</button>
                <span id="chat-title"># welcome</span>
            </header>
            <div id="messages"></div>
            <div id="input-area">
                <input type="text" id="msg-input" placeholder="Message..." style="flex:1">
                <button id="btn-send">Send</button>
            </div>
        </main>

        <aside id="sidebar-right">
            <div style="font-size:11px; font-weight:bold; opacity:0.6; margin-bottom:10px;">ADD USER</div>
            <input type="text" id="add-user-input" placeholder="@username" style="width:100%; font-size:12px; margin-bottom:5px;">
            <button id="btn-add-user" style="width:100%; font-size:12px;">Add</button>
            
            <div style="font-size:11px; font-weight:bold; opacity:0.6; margin:20px 0 10px 0;">MEMBERS</div>
            <div id="member-list" style="flex: 1; overflow-y: auto;"></div>

            <button id="btn-leave-chat">Leave Group</button>
        </aside>
    </div>
    <script type="module" src="app.js"></script>
</body>
</html>
